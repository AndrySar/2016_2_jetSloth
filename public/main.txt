(function () {
    'use strict';

    if (typeof window === 'object') {

        //import
        let Button = window.Button;
        let Game = window.Game;
        let Form = window.Form;

        let signInPage = document.querySelector('.js-signin');
        let signUpPage = document.querySelector('.js-signup');

        let signInForm = new Form({
            el: document.createElement('div'),
            data: {
                title: 'signIn',
                fields: [
                    {
                        name: 'email',
                        type: 'email'
                    },
                    {
                        name: 'password',
                        type: 'password'
                    }
                ],
                controls: [
                    {
                        text: 'Sign In',
                        attrs: {
                            type: 'submit'
                        }
                    }
                ]
            }
        });

	 let signUpForm = new Form({
            el: document.createElement('div'),
            data: {
                title: 'signUp',
                fields: [
                    {
                        name: 'email',
                        type: 'email'
                    },
		    {
                        name: 'name',
                        type: 'text'
                    },
                    {
                        name: 'password',
                        type: 'password'
                    }
                ],
                controls: [
                    {
                        text: 'Sign Up',
                        attrs: {
                            type: 'submit'
                        }
                    }
                ]
            }
        });

        signInForm.on('submit', event => {
            event.preventDefault();
            let formData = signInForm.getFormData();
            let body = {
			email: formData.email,
			password: formData.password
	    };
	    fetch('/signin', {method: "post", body: JSON.stringify(body)}) 
		.then(
		function(response) {
		alert("signInGetAnswer");
		signInPage.hidden = true;
		});

        });
        signUpForm.on('submit', event => {
            event.preventDefault();
            let formData = signUpForm.getFormData();
            let body = {
			email: formData.email,
			name: formData.name,
			password: formData.password
		};
	    fetch('/signup', {method: "post", body: JSON.stringify(body)}) 
		.then(
		function(response) {
		alert("signUpGetAnswer");
		signUpPage.hidden = true;
	        });
        });
        signInPage.appendChild(signInForm.el);
        
	signUpPage.appendChild(signUpForm.el);

        signInPage.hidden = false;

	signUpPage.hidden = false;
    }

})();
